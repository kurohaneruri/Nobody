# 更新日志

## [未发布] - 2024-02-11

### 修复
- **修复了玩家选项不显示的问题**
  - 在 `game_engine.rs` 的 `initialize_plot()` 方法中添加了选项生成逻辑
  - 现在初始化剧情时会自动调用 `PlotEngine::generate_player_options()` 生成 2-5 个可选行动
  - 确保玩家进入游戏后立即看到可操作的选项

- **修复了点击选项没有反应的问题**
  - 重新实现了 `execute_player_action` Tauri 命令
  - 现在点击选项会：
    1. 验证并处理玩家行动
    2. 计算行动结果
    3. 推进剧情
    4. 更新剧情状态
    5. 重新生成新的玩家选项
  - 添加了 `GameEngine::update_plot_state()` 方法来保存更新后的剧情状态

- **改进了存档对话框的显示**
  - 调整了 `SaveLoadDialog.vue` 的 z-index 值
  - 使用更合理的层级（50/51）而不是过高的值（9999/10000）
  - 确保对话框正确显示在游戏界面上方，不与左侧角色面板重叠

### 改进
- **优化了选项生成逻辑**
  - 确保每个场景至少有 2 个选项，最多 5 个选项
  - 根据角色状态动态生成选项（如突破选项只在 sub_level < 3 时显示）
  - 根据位置生成特定选项（宗门有藏书阁，城市有集市）

- **改进了中文本地化**
  - 所有玩家选项现在都使用中文描述
  - 修炼、突破、休息等行动都有清晰的中文说明

### 技术细节
- 在 `GameEngine` 中添加了 `update_plot_state()` 公共方法
- 重构了 `execute_player_action` 命令以正确处理游戏逻辑
- 修复了 UTF-8 编码问题（重新创建了 `tauri_commands.rs` 文件）

## [0.1.0] - 2024-02-10

### 新增
- 初始 MVP 版本发布
- 基础游戏引擎实现
- 剧情系统
- 存档/加载系统
- 角色属性系统
- 修炼和突破机制

### 已知问题
- 预设剧本功能尚未实现
- 部分高级功能（战斗系统、NPC 交互）仍在开发中
